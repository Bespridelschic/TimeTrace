<Page
    x:Class="TimeTrace.View.MainView.PersonalMapsCreatePages.PersonalEventCreatePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d">

	<Page.Resources>
		<ResourceDictionary>
			<Style TargetType="StackPanel">
				<Setter Property="Transitions">
					<Setter.Value>
						<TransitionCollection>
							<EntranceThemeTransition/>
						</TransitionCollection>
					</Setter.Value>
				</Setter>
			</Style>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/ResourceDictionaries/MainDictionary.xaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Page.Resources>

	<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition />
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="40"/>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="40"/>
		</Grid.ColumnDefinitions>

		<Button ToolTipService.ToolTip="Вернуться к выбору категорий" Click="{x:Bind ViewModel.BackToCategories}" VerticalAlignment="Stretch">
			<FontIcon Glyph="&#xe72b;"/>
		</Button>

		<TextBlock Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2"  Text="Установка нового события календаря"
				   Foreground="SteelBlue" FontSize="35" Margin="20, 20, 20, 0" TextWrapping="WrapWholeWords"/>

		<ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" Margin="0, 10, 0, 10" VerticalAlignment="Center">

			<VariableSizedWrapGrid Orientation="Horizontal" HorizontalAlignment="Center">

				<StackPanel>

					<TextBox PlaceholderText="Задайте имя события" Header="Имя события*" Margin="15, 5, 15, 5" MaxLength="100" IsSpellCheckEnabled="True"
					 ToolTipService.ToolTip="Имя событие, отображаемое в календаре" Text="{x:Bind ViewModel.CurrentMapEvent.Name, Mode=TwoWay}" Width="370"/>

					<TextBox PlaceholderText="Задайте описание событию" Header="Описание события" MaxLength="400" Margin="15, 5, 15, 5" TextWrapping="Wrap"
						 AcceptsReturn="True" ToolTipService.ToolTip="Описание события" Text="{x:Bind ViewModel.CurrentMapEvent.Description, Mode=TwoWay}"
						 IsSpellCheckEnabled="True" MaxHeight="130" Height="130"/>

				</StackPanel>

				<StackPanel>

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition />
						</Grid.ColumnDefinitions>

						<CalendarDatePicker PlaceholderText="Дата начала" Header="Дата начала*" Margin="15, 5, 10, 5"
											DateFormat="{}{day.integer} {month.full} {year.full}"
											Width="180"
											Date="{x:Bind ViewModel.CurrentMapEvent.StartDate, Mode=TwoWay}"
											MinDate="{x:Bind ViewModel.MinDate}" ToolTipService.ToolTip="Дата, к которой будет привязано событие"/>

						<TimePicker Grid.Column="1" Margin="0, 5, 15, 5" Header="Время начала"
									ToolTipService.ToolTip="Время, к которому будет привязано событие"
									HorizontalAlignment="Right" Width="180" MinWidth="180"
									Time="{x:Bind ViewModel.CurrentMapEvent.StartTime, Mode=TwoWay}"/>

					</Grid>

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="205"/>
							<ColumnDefinition />
						</Grid.ColumnDefinitions>

						<ToggleSwitch Grid.Column="1" FlowDirection="RightToLeft" IsOn="{x:Bind ViewModel.IsNotAllDay, Mode=TwoWay}"
									  Header="Весь день" OffContent="Да" OnContent="Нет" Margin="0, 5, 10, 5"/>

						<ComboBox Header="Интервал повторения" Margin="15, 5, 10, 5" Grid.Column="0"
								  HorizontalAlignment="Stretch"
								  ToolTipService.ToolTip="Как часто будет происходить напоминание">
							<ComboBoxItem Content="Без повторений"/>
							<ComboBoxItem Content="Каждый день"/>
							<ComboBoxItem Content="Через день"/>
							<ComboBoxItem Content="Раз в неделю"/>
							<ComboBoxItem Content="Раз в месяц"/>
							<ComboBoxItem Content="Раз в год"/>
							<ComboBoxItem Content="Свой вариант"/>
						</ComboBox>

					</Grid>

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition />
						</Grid.ColumnDefinitions>

						<CalendarDatePicker PlaceholderText="Дата окончания" Header="Дата окончания*" Margin="15, 5, 10, 5"
											DateFormat="{}{day.integer} {month.full} {year.full}" Width="180"
											Date="{x:Bind ViewModel.CurrentMapEvent.EndDate, Mode=TwoWay}"
											MinDate="{x:Bind ViewModel.MinDate}" ToolTipService.ToolTip="Дата, к которой будет привязано событие"
											IsEnabled="{x:Bind ViewModel.IsNotAllDay, Mode=OneWay}"/>

						<TimePicker Grid.Column="1" Margin="0, 5, 15, 5" Header="Время окончания"
									ToolTipService.ToolTip="Длительность создаваемого события"
									Time="{x:Bind ViewModel.CurrentMapEvent.EndTime, Mode=TwoWay}"
									HorizontalAlignment="Right" Width="180" MinWidth="180"
									IsEnabled="{x:Bind ViewModel.IsNotAllDay, Mode=OneWay}"/>

					</Grid>

				</StackPanel>

				<StackPanel>

					<ComboBox Grid.Column="1" Header="Объект привязки" Margin="15, 5, 15, 5" HorizontalAlignment="Stretch" PlaceholderText="Объект привязки"
						ToolTipService.ToolTip="Объект привязки" SelectedIndex="{x:Bind ViewModel.BindingObjectIndex, Mode=TwoWay}">
						<ComboBoxItem Content="Место"/>
						<ComboBoxItem Content="Человек"/>
						<ComboBoxItem Content="Человек и место"/>
					</ComboBox>

					<AutoSuggestBox PlaceholderText="Выберите место события" Header="Место события" Margin="15, 5, 15, 5"
						ToolTipService.ToolTip="Место, привязываемое к событию" Text="{x:Bind ViewModel.CurrentMapEvent.Location, Mode=TwoWay}"
						Visibility="{x:Bind ViewModel.IsSelectPlace, Mode=OneWay}" QueryIcon="Globe"/>

					<AutoSuggestBox PlaceholderText="Человек связанный с событием" Header="Имя контакта" Margin="15, 5, 15, 5"
						ToolTipService.ToolTip="Имя человека, к которому привязывается событие" QueryIcon="Contact"
						Text="{x:Bind ViewModel.CurrentMapEvent.UserBind, Mode=TwoWay}"
						Visibility="{x:Bind ViewModel.IsSelectMan, Mode=OneWay}"/>

				</StackPanel>

			</VariableSizedWrapGrid>

		</ScrollViewer>

		<StackPanel Grid.Row="2" Grid.ColumnSpan="4" Margin="0, 0, 0, 25" HorizontalAlignment="Center">
			<TextBlock Text="* - обязательные поля" FontSize="10" Margin="0, 0, 0, 10" Foreground="Gray"/>
			<Button Content="Создать событие" Background="SteelBlue" Foreground="White" 
				Click="{x:Bind ViewModel.EventCreate}"/>
		</StackPanel>

	</Grid>
</Page>
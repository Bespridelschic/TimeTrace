<Page
	x:Class="TimeTrace.View.MainView.PersonalMapsCreatePages.CategorySelectPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="using:TimeTrace.Model.Events"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:media="using:Windows.UI.Xaml.Media"
	mc:Ignorable="d">

	<Page.Resources>
		<Style TargetType="Button">
			<Setter Property="Width" Value="150" />
			<Setter Property="Height" Value="150" />
			<Setter Property="Background" Value="White" />
			<Setter Property="BorderBrush" Value="Green" />
			<Setter Property="BorderThickness" Value="1.5" />
			<Setter Property="Foreground" Value="Black" />
			<Setter Property="Margin" Value="1.5" />
			<Setter Property="ContentTemplate">
				<Setter.Value>
					<DataTemplate x:DataType="local:Area">
						<StackPanel ToolTipService.Placement="Top">
							<ToolTipService.ToolTip>
								<StackPanel>
									<StackPanel Margin="10,2" Orientation="Horizontal">
										<TextBlock
											Margin="0,0,5,0"
											FontSize="15"
											Text="Календарь: " />
										<TextBlock FontSize="15" Text="{Binding Name}" />
									</StackPanel>
									<StackPanel Margin="10,2" Orientation="Horizontal">
										<TextBlock
											Margin="0,0,5,0"
											FontSize="15"
											Text="Описание: " />
										<TextBlock FontSize="15" Text="{Binding Description}" />
									</StackPanel>
									<StackPanel Margin="10,2" Orientation="Horizontal">
										<TextBlock
											Margin="0,0,5,0"
											FontSize="15"
											Text="Обновлено: " />
										<TextBlock FontSize="15" Text="{Binding UpdateAt}" />
									</StackPanel>
								</StackPanel>
							</ToolTipService.ToolTip>
							<PersonPicture
								Width="70"
								Height="70"
								Margin="10,0,0,0"
								HorizontalAlignment="Center"
								VerticalAlignment="Top"
								Background="White"
								Initials="C#" />
							<TextBlock
								HorizontalAlignment="Center"
								FontSize="20"
								Text="{Binding Name}" />
							<TextBlock
								HorizontalAlignment="Center"
								FontSize="15"
								Foreground="SlateGray"
								Text="{Binding Description}" />
						</StackPanel>
					</DataTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Page.Resources>

	<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<Grid>

			<Grid.RowDefinitions>
				<RowDefinition />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<TextBlock
				Margin="20,20,20,10"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				FontSize="35"
				Text="Календари"
				TextWrapping="WrapWholeWords" />

			<MenuFlyoutSeparator Grid.Row="1" VerticalAlignment="Bottom" />

		</Grid>

		<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
			<ItemsControl ItemsSource="{x:Bind ViewModel.ButtonCollection, Mode=TwoWay}">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<VariableSizedWrapGrid
							Margin="50,20"
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							Orientation="Horizontal" />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>
			</ItemsControl>
		</ScrollViewer>

		<CommandBar Grid.Row="2" VerticalAlignment="Bottom">
			<CommandBar.Content>
				<StackPanel Margin="10,-5" Orientation="Horizontal">
					<TextBlock Text="Поиск по категориям: " />
					<AutoSuggestBox
						Width="250"
						Margin="10,13,10,10"
						ItemsSource="{x:Bind ViewModel.AreaSuggestList, Mode=OneWay}"
						PlaceholderText="Поиск..."
						QueryIcon="Find"
						TextChanged="{x:Bind ViewModel.CategoryFilter}" />
				</StackPanel>

			</CommandBar.Content>

			<AppBarButton
				Click="{x:Bind ViewModel.CategoryCreate}"
				Icon="Add"
				Label="Добавить календарь"
				ToolTipService.ToolTip="Создать новый календарь" />
			<AppBarButton
				Icon="Remove"
				Label="Удалить выбранные"
				ToolTipService.ToolTip="Удалить выбранные календари" />
		</CommandBar>

	</Grid>
</Page>